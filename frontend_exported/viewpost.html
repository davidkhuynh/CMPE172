<!DOCTYPE html>
<html lang="la">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="generator" content="Responsive Bootstrap Builder 2.5.308 - Trial Version">
  <title>Rocket - Home</title>
  <link rel="stylesheet" href="css/bootstrap4.min.css">
  <link rel="stylesheet" href="css/wireframe-theme.min.css">
  <script>document.createElement( "picture" );</script>
  <script class="picturefill" async="async" src="js/picturefill.min.js"></script>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed%7CRoboto:300,400">
</head>

<body class="grid-1">
  <div class="row nav-row">
    <div class="col-xs-12 col-xl-12 column-2 navbar-sticky-top">
      <div class="container-fluid nav-container navbar-sticky-top">
        <a class="link-text nav-link" href="index.html" title="Download">HOME</a>
        <a class="link-text nav-link" href="signup.html" title="Signup">SIGNUP</a>
        <a class="link-text nav-link" href="confirmation.html" title="Signup">CONFIRM</a>
        <a class="link-text nav-link" href="login.html" title="Signup">LOGIN</a>
        <a class="link-text nav-link" href="myprofilepage.html" title="Profile">YOUR PROFILE</a>
        <a class="link-text nav-link" href="gallery.html" title="Profile">EXPLORE</a>
      </div>
    </div>
  </div>
  <div class="row subscribe postRow">
    <div class="col-xs-12 offset-xl-1 col-xl-10 column-3">
      <div class="subgrid">
        <div class="row subgrid-row-2">
          <div class="col-xs-3 offset-xs-1 col-md-2">
            <div class="responsive-picture picture-2">
              <picture><img alt="Placeholder Picture" src="img/picture.svg">

              </picture>
            </div>
          </div>
          <div class="col-xs-3">
            <a class="link-text text-link-1" href="profilepage.html" id="postUser">Jeremiah</a>
          </div>
          <div class="col-xs-2"><a class="link-button btn viewbtn" href="viewpost.html" title="">Follow</a>
          </div>
        </div>
      </div>
      <div class="subgrid">
        <div class="row subgrid-row-1">
          <div class="col-xs-10 push-xs-0 offset-xs-1">
            <div class="responsive-picture picture-1">
              <picture><img alt="Placeholder Picture" id="postPicture">
              </picture>
            </div>
          </div>
        </div>
        <div class="row subgrid-row-2">
          <div class="col-xs-12 col-xl-12">
            <p class="paragraph paragraph-2" id="postText">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas et metus.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row row-3">
    <div class="col-xs-4 offset-xs-2 col-xl-3 offset-xl-3"><a class="link-button btn subscribe" id="editPostButton" title="">EDIT</a>
    </div>
    <div class="col-xs-4 col-xl-3"><a class="link-button btn subscribe" id="deletePostButton" title="">DELETE</a>
    </div>
  </div>
  <script src="js/jquery.min.js"></script>
  <script src="js/outofview.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="js/routeFunctions.js"></script>
  <script>
        // set url
        let queryString = window.location.hash.substring(1);
        let splitString = queryString.split("&");
        let user = splitString[0];
        let postId = splitString[1];

        // update content
        $.post(
            SERVER_URL + "/post/" + postId,
            (postData) => {
                console.log(postData);
                $("#postUser").text(postData.username);
                if (postData.picture.length > 0) {
                    $("#postPicture").attr("src", IMAGE_HOST_URL + postData.picture);
                } else {
                    $("#postPicture").hide();
                }
                $("#postText").text(postData.text);
                $("#editPostButton").attr("value", postData.id);
                $("#deletePostButton").attr("value", postData.id);
            }
        );

        // button handlers
        $('#editPostButton').click(() => {
             window.location = "editpost.html#" + postId ;
         });

        $('#deletePostButton').click(() => {
            $.post(
            SERVER_URL + "/delete_post/" + postId,
            () => {
                window.location = "index.html";
            });
    });
  </script>
</body>

</html>