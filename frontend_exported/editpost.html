<!DOCTYPE html>
<html lang="la">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="generator" content="Responsive Bootstrap Builder 2.5.308 - Trial Version">
  <title>Rocket - Home</title>
  <link rel="stylesheet" href="css/bootstrap4.min.css">
  <link rel="stylesheet" href="css/wireframe-theme.min.css">
  <script>document.createElement( "picture" );</script>
  <script class="picturefill" async="async" src="js/picturefill.min.js"></script>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed%7CRoboto:300,400">
</head>

<body class="grid-1">
  <div class="row nav-row">
    <div class="col-xs-12 col-xl-12 column-2 navbar-sticky-top">
      <div class="container-fluid nav-container navbar-sticky-top">
        <a class="link-text nav-link" href="index.html" title="Download">HOME</a>
        <a class="link-text nav-link" href="signup.html" title="Signup">SIGNUP</a>
        <a class="link-text nav-link" href="confirmation.html" title="Signup">CONFIRM</a>
        <a class="link-text nav-link" href="login.html" title="Signup">LOGIN</a>
        <a class="link-text nav-link" href="profilepage.html" title="Profile">YOUR PROFILE</a>
        <a class="link-text nav-link" href="gallery.html" title="Profile">EXPLORE</a>
      </div>
    </div>
  </div>
  <div class="row subscribe">
    <div class="col-xs-12 col-xl-6 offset-xl-3">
      <h4 class="heading-1"><span class="heading-text-1">EDIT POST</span>
      </h4>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-8 push-xs-2">
      <form class="form-container">
        <div class="container-fluid container-2">
          <div class="responsive-picture picture-1" id="postPicturePreview">
            <picture><img alt="Placeholder Picture" id="postPicture" src="img/picture.svg">
            </picture>
          </div><input value="" type="file" class="file-1" id="pictureFile">
          <span class="text-element form-input-caption">Description</span><input value="" name="text-name" type="text" class="form-input" id="postText">
        </div>
      </form>
    </div>
  </div>
  <div class="row row-1">
    <div class="col-xs-4"></div>
    <div class="col-xs-4"><a class="link-button btn form submit" href="#" title="Subscribe" id="submitPostButton">SUBMIT</a>
    </div>
    <div class="col-xs-4"></div>
  </div>
  <script src="js/jquery.min.js"></script>
  <script src="js/outofview.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/outofview.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="js/routeFunctions.js"></script>
  <script>
      const postId = window.location.hash.substring(1);

      // load current content
      $.post(
          SERVER_URL + "/post/" + postId,
          (postData) => {
              $("#postPicture").attr("src", IMAGE_HOST_URL + postData.picture);
              $("#postText").val(postData.text);
          }
      );

      // button/input handlers
      $("#submitPostButton").click(() => {
          let text = $("#postText").val();
          let picture = $("#pictureFile").get(0).files[0];

          if (picture) {
              editPostWithPicture("anon", postId, picture, text);
          } else {
              editPost("anon", postId, text);
          }
          window.location = "index.html";
      });

      $(document).on("change", "#pictureFile", () => {
          let picture = $("#pictureFile").get(0).files[0];
          let reader = new FileReader();
          reader.onload = (e) => {
              $("#postPicture").attr("src", e.target.result);
          };
          reader.readAsDataURL(picture);
      });

  </script>
</body>

</html>